---
import Layout from "@layouts/Layout.astro";
import "@styles/app.scss";
---

<Layout title="Sven Ahrens - Portfolio" id="chatgpt">
    <main class="text-white flex flex-col justify-center h-full">
        <div class="p-6 md:px-32">
            <h1 class="text-7xl md:text-9xl font-bold">Ask me anything</h1>
            <form class="mt-16">
                <label></label>
                <input
                    type="text"
                    placeholder="...What work do you do?"
                    class="w-full p-4 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-orange-800 transition duration-150 ease-in-out text-xl border-orange-500"
                />
            </form>
            <div id="chatgptResponse" class="mt-16 w-100"></div>
        </div>
    </main>
</Layout>

<script>
    const form: HTMLFormElement | null = document.querySelector("form");

    form?.addEventListener("submit", (e: SubmitEvent) => {
        e.preventDefault();

        const input: HTMLInputElement | null = form.querySelector("input");
        const chatgptResponse: HTMLElement | null =
            document.querySelector("#chatgptResponse");

        if (!input || !chatgptResponse) return;

        // Clear beforehand
        chatgptResponse.innerHTML = "";

        // TODO:: Get Response from ChatGPT and use the input value as the question

        let response = "Please ask me a question";

        if (input.value.length > 0) {
            response = `Lorem ipsum dolor sit amet consectetur adipisicing elit.
            Quisquam, voluptatum. Quisquam, voluptatum. Quisquam, voluptatum.
            Quisquam, voluptatum. Quisquam, voluptatum. Quisquam, voluptatum.
            Quisquam, voluptatum. Quisquam, voluptatum. Quisquam, voluptatum.
            Quisquam, voluptatum. Quisquam, voluptatum. Quisquam, voluptatum.
            Quisquam, voluptatum. Quisquam, voluptatum. Quisquam, voluptatum.`;
        }
        const charList = response.split("");

        window.setTimeout(() => {
            charList.forEach((char, index) => {
                window.setTimeout(() => {
                    chatgptResponse?.append(char);
                }, 50 * index);
            });
        }, 1000);
    });
</script>
